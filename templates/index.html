{% extends "base.html" %}
{% block content %}
  <form action="{{ url_for('recommend') }}" method="post" class="card p-3">
    <div class="mb-3">
      <label class="form-label">Skills (comma separated, e.g. "python, data analysis")</label>
      <input name="skills" class="form-control" placeholder="python, data analysis, manager">
    </div>

    <div class="mb-3">
      <label class="form-label">Languages & Proficiency</label>
      <div id="languages">
        <div class="row mb-2">
          <div class="col">
            <input name="language_0" class="form-control" placeholder="Language (e.g. English)">
          </div>
          <div class="col">
            <select name="proficiency_0" class="form-select">
              <option value="1">Beginner</option>
              <option value="2">Intermediate</option>
              <option value="3">Fluent</option>
            </select>
          </div>
          <div class="col-auto">
            <button type="button" class="btn btn-danger btn-sm" onclick="this.parentElement.parentElement.remove()">Remove</button>
          </div>
        </div>
      </div>
      <button type="button" class="btn btn-secondary btn-sm" onclick="addLanguage()">+ Add language</button>
    </div>

    <div class="mb-3">
      <label class="form-label">Openness to diversity (0 = low, 1 = very open)</label>
      <input name="openness" type="range" min="0" max="1" step="0.01" value="0.7" class="form-range">
    </div>

    <div class="mb-3">
      <label class="form-label">Budget preference (0 = prefers cheaper, 1 = fine with expensive)</label>
      <input name="budget_pref" type="range" min="0" max="1" step="0.01" value="0.5" class="form-range">
    </div>

    <div class="mb-3">
      <label class="form-label">Climate preference (-1 cold â†’ 1 warm)</label>
      <input name="climate_pref" type="range" min="-1" max="1" step="0.1" value="0" class="form-range">
    </div>

    <div class="mb-3">
      <label>Skill weight</label>
      <input type="range" name="weight_skills" min="0" max="1" step="0.01" value="0.3" class="form-range">
      <label>Language weight</label>
      <input type="range" name="weight_lang" min="0" max="1" step="0.01" value="0.3" class="form-range">
      <label>Tolerance weight</label>
      <input type="range" name="weight_tolerance" min="0" max="1" step="0.01" value="0.2" class="form-range">
      <label>Cost weight</label>
      <input type="range" name="weight_cost" min="0" max="1" step="0.01" value="0.1" class="form-range">
      <label>Climate weight</label>
      <input type="range" name="weight_climate" min="0" max="1" step="0.01" value="0.1" class="form-range">
    </div>

    <button class="btn btn-primary">Find best EU matches</button>
  </form>

  <script>
  let langIndex = 1;
  function addLanguage() {
    const div = document.createElement("div");
    div.className = "row mb-2";
    div.innerHTML = `
      <div class="col">
        <input name="language_${langIndex}" class="form-control" placeholder="Language">
      </div>
      <div class="col">
        <select name="proficiency_${langIndex}" class="form-select">
          <option value="1">Beginner</option>
          <option value="2">Intermediate</option>
          <option value="3">Fluent</option>
        </select>
      </div>
      <div class="col-auto">
        <button type="button" class="btn btn-danger btn-sm" onclick="this.parentElement.parentElement.remove()">Remove</button>
      </div>
    `;
    document.getElementById("languages").appendChild(div);
    langIndex++;
  }
  </script>
{% endblock %}